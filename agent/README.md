# CI-Vision Agent

åŸºäº LangChain çš„æ™ºèƒ½ä»£ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å¤§è¯­è¨€æ¨¡å‹ï¼ˆDeepSeekã€Qwenï¼‰å’Œå·¥å…·é›†æˆçš„ AI ä»£ç†å¹³å°ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **å¤šæ¨¡å‹æ”¯æŒ**: é›†æˆ DeepSeek å’Œ Qwen å¤§è¯­è¨€æ¨¡å‹
- ğŸ”§ **å·¥å…·é›†æˆ**: æ”¯æŒ Shell å‘½ä»¤æ‰§è¡Œã€æ–‡ä»¶æ“ä½œç­‰å·¥å…·
- ğŸš€ **å¢å¼ºæ‰§è¡Œå™¨**: ä¼˜åŒ–çš„ä»£ç†æ‰§è¡Œå™¨ï¼Œæ›´å¥½åœ°å¤„ç†è¿­ä»£é™åˆ¶å’Œé”™è¯¯æ¢å¤
- ğŸ“Š **å®Œå–„æ—¥å¿—**: è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯
- ğŸŒ **gRPC æ”¯æŒ**: æä¾› gRPC æ¥å£ç”¨äºæœåŠ¡é—´é€šä¿¡
- âš™ï¸ **çµæ´»é…ç½®**: æ”¯æŒ YAML é…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡

## é¡¹ç›®ç»“æ„

```
agent/
â”œâ”€â”€ .env                     # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ .venv/                   # Pythonè™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ main.py                  # ç¨‹åºå…¥å£æ–‡ä»¶
â”œâ”€â”€ requirements.txt         # Pythonä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ config/                  # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py           # é…ç½®ç±»å®ç°
â”‚   â”œâ”€â”€ hhw_config.yaml     # YAMLé…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ path.py             # è·¯å¾„é…ç½®
â”œâ”€â”€ src/                     # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ agent/              # AIæ™ºèƒ½ä»£ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ agent_factory/  # ä»£ç†å·¥å‚æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ agents_registry.py    # ä»£ç†æ³¨å†Œå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ deepseek_agent.py     # DeepSeekä»£ç†å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ qwen_agent.py         # Qwenä»£ç†å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ enhanced_executor.py  # å¢å¼ºæ‰§è¡Œå™¨
â”‚   â”‚   â”‚   â””â”€â”€ prompt.py             # æç¤ºè¯æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ llms/           # è¯­è¨€æ¨¡å‹æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ llms.py     # æ¨¡å‹è·å–å’Œé…ç½®
â”‚   â”‚   â””â”€â”€ tools_factory/  # å·¥å…·å·¥å‚æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ tools_registry.py     # å·¥å…·æ³¨å†Œå™¨
â”‚   â”‚       â”œâ”€â”€ shell.py              # Shellå‘½ä»¤å·¥å…·
â”‚   â”‚       â””â”€â”€ file_operations.py   # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”œâ”€â”€ grpc/               # gRPCé€šä¿¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ client.py       # gRPCå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ service.py      # gRPCæœåŠ¡ç«¯
â”‚   â”‚   â””â”€â”€ proto/          # Protocol Bufferså®šä¹‰
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ settings/           # ç³»ç»Ÿè®¾ç½®æ¨¡å—
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ logger.py       # æ—¥å¿—å·¥å…·
â”‚       â””â”€â”€ pydantic_v1.py  # Pydantic v1å…¼å®¹å±‚
â”œâ”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ logs/                   # è¿è¡Œæ—¥å¿—ç›®å½•
â”œâ”€â”€ test/                   # æµ‹è¯•ç¤ºä¾‹
â””â”€â”€ tests/                  # å•å…ƒæµ‹è¯•
    â”œâ”€â”€ test_agent/         # ä»£ç†æ¨¡å—æµ‹è¯•
    â””â”€â”€ test_grpc/          # gRPCæ¨¡å—æµ‹è¯•
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- pip æˆ– conda

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd agent
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
```bash
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# æˆ–
.venv\Scripts\activate     # Windows
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

4. **é…ç½®ç¯å¢ƒ**
```bash
# å¤åˆ¶å¹¶ç¼–è¾‘ç¯å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
```

5. **è¿è¡Œç¨‹åº**
```bash
python main.py
```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

- `ENV`: ç¯å¢ƒæ ‡è¯†ï¼ˆå¦‚ `hhw`ï¼‰
- `DEEPSEEK_API_KEY`: DeepSeek API å¯†é’¥
- `QWEN_API_KEY`: Qwen API å¯†é’¥

### YAML é…ç½®

åœ¨ `config/hhw_config.yaml` ä¸­é…ç½®è¯¦ç»†å‚æ•°ï¼š

- æ¨¡å‹é…ç½®
- API ç«¯ç‚¹
- å·¥å…·è®¾ç½®
- æ—¥å¿—çº§åˆ«

## æ ¸å¿ƒç»„ä»¶

### ä»£ç†ç³»ç»Ÿ

- **ä»£ç†æ³¨å†Œå™¨**: æ ¹æ®æ¨¡å‹ç±»å‹è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ä»£ç†å®ç°
- **DeepSeek ä»£ç†**: é’ˆå¯¹ DeepSeek æ¨¡å‹ä¼˜åŒ–çš„ä»£ç†
- **Qwen ä»£ç†**: é’ˆå¯¹ Qwen æ¨¡å‹ä¼˜åŒ–çš„ä»£ç†
- **å¢å¼ºæ‰§è¡Œå™¨**: æ”¹è¿›çš„æ‰§è¡Œé€»è¾‘ï¼Œæ›´å¥½åœ°å¤„ç†è¿­ä»£é™åˆ¶

### å·¥å…·ç³»ç»Ÿ

- **Shell å·¥å…·**: æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
- **æ–‡ä»¶æ“ä½œå·¥å…·**: æ–‡ä»¶è¯»å†™ã€åˆ›å»ºã€åˆ é™¤ç­‰æ“ä½œ
- **å·¥å…·æ³¨å†Œå™¨**: åŠ¨æ€å·¥å…·åŠ è½½å’Œç®¡ç†

### gRPC æœåŠ¡

- **å®¢æˆ·ç«¯**: ç”¨äºä¸å…¶ä»–æœåŠ¡é€šä¿¡
- **æœåŠ¡ç«¯**: æä¾›ä»£ç†åŠŸèƒ½çš„ gRPC æ¥å£
- **Protocol Buffers**: å®šä¹‰æœåŠ¡æ¥å£å’Œæ•°æ®ç»“æ„

## ä½¿ç”¨ç¤ºä¾‹

```python
from src.agent.llms.llms import get_llm
from src.agent.agent_factory.agents_registry import agents_registry
from src.agent.tools_factory.shell import shell

# è·å–è¯­è¨€æ¨¡å‹
llm = get_llm("deepseek")

# åˆ›å»ºä»£ç†
agent = agents_registry(llm=llm, tools=[shell], verbose=True)

# æ‰§è¡Œä»»åŠ¡
response = agent.invoke({
    "input": "ä½¿ç”¨shellå·¥å…·æ‰§è¡Œpwdå‘½ä»¤ï¼Œå¹¶å‘Šè¯‰æˆ‘å½“å‰ç›®å½•"
})

print(response['output'])
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡å‹

1. åœ¨ `src/agent/agent_factory/` ä¸­åˆ›å»ºæ–°çš„ä»£ç†å®ç°
2. åœ¨ `agents_registry.py` ä¸­æ³¨å†Œæ–°æ¨¡å‹
3. æ›´æ–°é…ç½®æ–‡ä»¶æ”¯æŒæ–°æ¨¡å‹

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `src/agent/tools_factory/` ä¸­å®ç°å·¥å…·ç±»
2. åœ¨ `tools_registry.py` ä¸­æ³¨å†Œæ–°å·¥å…·
3. æ›´æ–°ä»£ç†é…ç½®ä»¥åŒ…å«æ–°å·¥å…·

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä»£ç†åœæ­¢æ‰§è¡Œ**: æ£€æŸ¥è¿­ä»£é™åˆ¶è®¾ç½®å’Œå¢å¼ºæ‰§è¡Œå™¨æ—¥å¿—
2. **æ¨¡å‹ API é”™è¯¯**: éªŒè¯ API å¯†é’¥å’Œç½‘ç»œè¿æ¥
3. **å·¥å…·æ‰§è¡Œå¤±è´¥**: æ£€æŸ¥å·¥å…·æƒé™å’Œå‚æ•°æ ¼å¼

### æ—¥å¿—åˆ†æ

æŸ¥çœ‹ `logs/` ç›®å½•ä¸­çš„æ—¥å¿—æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- ä»£ç†æ‰§è¡Œæ­¥éª¤
- å·¥å…·è°ƒç”¨è®°å½•
- é”™è¯¯å †æ ˆä¿¡æ¯

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/new-feature`)
3. æäº¤æ›´æ”¹ (`git commit -am 'Add new feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/new-feature`)
5. åˆ›å»º Pull Request

## è®¸å¯è¯

[æ·»åŠ è®¸å¯è¯ä¿¡æ¯]

## è”ç³»æ–¹å¼

[æ·»åŠ è”ç³»ä¿¡æ¯]
